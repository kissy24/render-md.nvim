# InsertMode仕様：編集時のバッファ全体レンダリング解除

## 1. 目的
インサートモード（編集モード）に入った際、現在編集中の行だけでなく、**バッファ内のすべての装飾（Extmarks, Virtual Text, 背景色, Conceal）を一括で解除**します。これにより、文書全体が純粋な Markdown テキストとして表示され、カーソル位置の混乱や視覚的なノイズを完全に排除します。

## 2. 挙動の詳細
- **InsertEnter (モード突入時)**:
    - **バッファ全体のクリア**: `nvim_buf_clear_namespace` を使用し、バッファ全域（0行目から最終行まで）の `render-md` 装飾を削除する。
    - **全域の Conceal 解除**: `conceallevel` を 0 に設定し、すべての Markdown 記号を表示する。
- **InsertLeave (モード脱出時)**:
    - **再レンダリング**: バッファ全体に対して `render` 関数を再実行し、装飾を復元する。
    - **Conceal の復元**: `conceallevel` を 2 に戻す。

## 3. 実装方針
- `render-md` のネームスペース ID を一元管理し、確実にクリアが行われるようにする。
- `InsertEnter` イベント発生時に、遅延なくバッファ全体の装飾を削除するロジックを `init.lua` に実装する。
- インサートモード中は `TextChanged` 等のイベントによる再描画を完全に抑制する。
